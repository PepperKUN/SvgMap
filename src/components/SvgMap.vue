<template>
  <div class="map_container" :style="{ width: width + 'px', height: height + 'px' }">
    <svg viewBox="0 0 368 268" :width="mapBox.width" :height="mapBox.height" class="map_content">
      <g id="shmap" @mouseenter="toolTipLoopStop" @mouseleave="toolTipLoop(1000)" @mousemove="cursorFollow">
        <g v-for="(map, index) in mapData" :key="'group1_' + index" @mouseenter="cursorIn(map.number, index, map.name)" @mouseleave="cursorOut(index)" :id="map.name">
          <path :d="pathMatch(map.name)" :fill="mapPath[index].color" stroke="rgb(255,255,255)" stroke-width="0.6" stroke-linejoin="round" />
          <text :x="textXMatch(map.name)" :y="textYMatch(map.name)" class="mapName" v-if="!map.zoom">{{ map.name }}</text>
        </g>
      </g>
      <g id="zoom" @mouseenter="toolTipLoopStop" @mouseleave="toolTipLoop(1000)" :style="zoomStyle" @mousemove="cursorFollow">
        <template v-for="(zoom, index) in mapData">
          <g :key="'group2_' + index" v-if="zoom.zoom" @mouseenter="cursorIn(zoom.number, index, zoom.name)" @mouseleave="cursorOut(index)" :id="zoom.name + '_zoom'">
            <path :d="pathMatch(zoom.name)" :fill="mapPath[index].color" stroke="#FFFFFF" stroke-width="0.6" stroke-linejoin="round"/>
            <text :x="textXMatch(zoom.name)" :y="textYMatch(zoom.name)" class="mapName_zoom">{{ zoom.name }}</text>
          </g>
        </template>
      </g>
    </svg>
    <svg :viewBox="verticalViewBox" v-if="svgOptions.barPosition=='side' && svgOptions.barShow" :width="barWidth + 80" class="verticalStrip" version="1.1" xmlns="http://www.w3.org/2000/svg" @mousedown="cursorDown" @mousemove="cursorDrag" @mouseup="cursorUp" @mouseleave="cursorUp">
      <defs>
        <linearGradient id="Gradient" x1="0" x2="0" y1="0" y2="1">
          <stop offset="0%" :style="{ stopColor: svgOptions.colorGradient[0] }" />
          <stop offset="100%" :style="{ stopColor: svgOptions.colorGradient[1] }" />
        </linearGradient>
        <clipPath id="round-corner">
          <rect :y="greyBox[0]" x="32" :height="greyBox[1]" :width="barWidth" />
        </clipPath>
      </defs>
      <rect id="rect1" x="32" y="0" height="100%" :width="barWidth" :rx="svgOptions.barRadius" :ry="svgOptions.barRadius" :fill="svgOptions.barBackground"/>
      <rect id="rect2" x="32" y="0" height="100%" :width="barWidth" :rx="svgOptions.barRadius" :ry="svgOptions.barRadius" clip-path="url(#round-corner)" fill="url(#Gradient)" />
      <text y="0" x="30" class="text-start">{{ svgOptions.range[0] }}</text>
      <text y="100%" x="30" class="text-end">{{ svgOptions.range[1] }}</text>
      <g class="cursor" :style="{ transform: 'translateY(' + cursorPosition + '%)' }" v-show="cursorShow">
        <polygon :points="(barWidth + 34) + ',0 ' + (barWidth + 40) + ',-6 ' + (barWidth + 40) + ',6'" fill="black" />
        <text y="-5" :style="{ transform: 'scaleY(-1) translateX(' + (barWidth + 46) + 'px)'}" >{{ cursorText }}</text>
      </g>
      <polygon class="dragBtn btn_min" :points="(barWidth + 34) + ',0 ' + (barWidth + 44) + ',0 ' + (barWidth + 44) + ',-10'" style="transform: translateY(0%)" :fill="svgOptions.colorGradient[0]" />
      <polygon class="dragBtn btn_max" :points="(barWidth + 34) + ',0 ' + (barWidth + 44) + ',10 ' + (barWidth + 44) + ',0'" :fill="svgOptions.colorGradient[1]" style="transform: translateY(100%)"/>
      <g :style="{ transform: 'translateY(' + perDistance + '%)' }">
        <text y="-6" class="cursorFollow" v-show="followShow" :style="{ transform: 'scaleY(-1) translateX(' + (barWidth + 56) + 'px)' }">{{ dragP }}</text>
      </g>
    </svg>
    <svg :viewBox="horizonalViewBox" v-if="svgOptions.barPosition!=='side' && svgOptions.barShow" :height="barWidth + 60" class="gradStrip" version="1.1" xmlns="http://www.w3.org/2000/svg" @mousedown="cursorDown" @mousemove="cursorDrag" @mouseup="cursorUp" @mouseleave="cursorUp">
      <defs>
        <linearGradient id="Gradient" x1="0" x2="1" y1="0" y2="0">
          <stop offset="0%" :style="{ stopColor: svgOptions.colorGradient[0] }" />
          <stop offset="100%" :style="{ stopColor: svgOptions.colorGradient[1] }" />
        </linearGradient>
        <clipPath id="round-corner">
          <rect :x="greyBox[0]" y="16" :width="greyBox[1]" :height="barWidth" />
        </clipPath>
      </defs>
      <rect id="rect1" x="0" y="16" width="100%" :height="barWidth" :rx="svgOptions.barRadius" :ry="svgOptions.barRadius" :fill="svgOptions.barBackground"/>
      <rect id="rect2" x="0" y="16" width="100%" :height="barWidth" :rx="svgOptions.barRadius" :ry="svgOptions.barRadius" clip-path="url(#round-corner)" fill="url(#Gradient)" />
      <text x="0" y="2" class="text-start">{{ svgOptions.range[0] }}</text>
      <text x="100%" y="2" class="text-end">{{ svgOptions.range[1] }}</text>
      <g class="cursor" :style="{ transform: 'translateX(' + (100 - cursorPosition) + '%)' }" v-show="cursorShow">
        <polygon :points="'0,' + (barWidth + 20) + ' -6,' + (barWidth + 26) + ' 6,' + (barWidth + 26)" fill="black" />
        <text x="0" :y="barWidth + 30">{{ cursorText }}</text>
      </g>
      <polygon class="dragBtn btn_min" :points="'0,' + (barWidth + 20) + ' 0,' + (barWidth + 30) + ' 10,' + (barWidth + 30)" style="transform: translateX(0%)" :fill="svgOptions.colorGradient[0]" />
      <polygon class="dragBtn btn_max" :points="'0,' + (barWidth + 20) + ' -10,' + (barWidth + 30) + ' 0,' + (barWidth + 30)" :fill="svgOptions.colorGradient[1]" style="transform: translateX(100%)"/>
      <text x="0" :y="barWidth + 36" class="cursorFollow" v-show="followShow" :style="{ transform: 'translateX(' + perDistance + '%)' }">{{ dragP }}</text>
    </svg>
    <div class="tooltip" :class="{'animated':toolTipAnimated}" :style="'left:'+ (tooltip.x/368*mapBox.x+mapBox.offestX) +'px; top:'+ (tooltip.y/268*mapBox.y+mapBox.offestY) +'px'" v-show="cursorShow">
      <span>{{tooltip.name}}:</span><span>{{cursorText}}</span>
    </div>
  </div>
</template>

<script>
Number.prototype.clamp = function(min, max) {
  return Math.min(Math.max(this, min), max);
};
export default {
  name: 'svgmap',
  props: {
    options: Object,
    width: [String, Number],
    height: [String, Number],
    mapData: Array
  },
   data() {
    return {
      mapPath: [
        {
          name: "崇明",
          color: "",
          areaInclude: true,
          textP: [152, 56],
          path:
            "M245.579,80.163 C245.579,80.163 243.473,80.333 243.619,81.863 C243.765,83.394 243.300,84.670 242.212,85.265 C241.124,85.860 241.569,87.306 239.762,87.391 C237.955,87.476 233.481,85.775 232.713,86.965 C231.944,88.156 232.641,91.302 230.866,92.493 C229.093,93.683 224.672,93.768 221.870,94.194 C219.067,94.619 219.499,92.238 217.772,91.643 C216.045,91.047 211.212,90.792 211.212,90.792 C211.212,90.792 209.028,88.326 208.120,88.241 C207.213,88.156 196.927,83.734 190.312,81.013 C183.696,78.292 174.748,74.890 173.057,75.486 C171.365,76.081 166.869,77.016 165.517,75.486 C164.164,73.955 158.217,70.043 155.286,69.533 C152.356,69.023 148.940,69.108 146.137,66.131 C143.334,63.155 140.320,63.240 139.514,63.155 C138.707,63.070 132.589,60.179 131.357,59.328 C130.125,58.478 127.838,59.328 126.821,58.903 C125.802,58.478 124.430,56.267 122.195,55.502 C119.961,54.737 115.954,55.247 115.132,54.651 C114.311,54.056 113.526,51.335 110.482,50.399 C107.438,49.464 104.902,48.699 104.374,47.848 C103.846,46.998 95.472,39.260 94.017,37.644 C93.011,36.527 89.219,33.706 86.971,32.069 C86.970,32.069 86.968,32.069 86.967,32.069 C86.206,31.909 85.511,31.315 84.646,30.663 C83.858,30.461 82.454,30.185 81.235,30.416 C79.435,30.756 77.033,31.096 76.183,29.565 C75.333,28.035 71.059,22.933 69.420,21.912 C67.781,20.892 66.348,20.041 65.800,18.511 C65.800,18.511 65.711,15.534 65.711,15.534 C65.711,15.534 74.255,8.731 75.549,8.306 C76.843,7.881 77.459,8.306 78.552,7.881 C79.645,7.456 83.553,3.629 86.945,2.779 C90.338,1.928 90.964,2.694 91.947,1.928 C92.929,1.163 92.881,-0.453 95.930,0.653 C98.979,1.758 105.741,6.010 108.184,7.031 C110.627,8.051 120.568,11.027 121.418,12.558 C122.268,14.089 126.645,22.678 131.298,23.613 C135.950,24.548 136.621,23.443 136.839,24.038 C137.058,24.633 138.304,29.310 139.518,29.565 C140.732,29.821 151.557,32.117 156.836,37.219 C160.443,40.195 166.709,41.301 172.144,44.872 C177.579,48.444 186.120,51.675 187.955,52.525 C189.789,53.376 194.411,53.291 195.017,53.376 C195.623,53.461 197.873,54.737 200.610,55.502 C203.347,56.267 211.695,59.754 212.800,59.754 C213.906,59.754 221.132,59.328 228.446,61.880 C235.760,64.431 246.667,69.448 246.381,73.360 C246.096,77.271 245.579,80.163 245.579,80.163 zM170.923,37.644 C168.508,37.559 164.135,35.858 161.246,33.392 C158.358,30.926 153.826,30.671 151.607,30.416 C149.388,30.161 143.194,28.120 141.942,26.589 C140.690,25.059 143.362,23.613 143.362,23.613 C145.566,23.358 155.348,27.780 158.593,28.715 C161.838,29.651 172.408,33.477 175.861,34.668 C179.315,35.858 178.742,36.879 178.463,37.644 C178.184,38.409 173.338,37.729 170.923,37.644 zM175.046,86.492 C174.280,86.067 173.638,85.642 172.005,85.642 C170.371,85.642 168.580,84.579 169.428,83.516 C169.428,83.516 170.279,82.559 171.929,83.091 C173.578,83.622 174.860,84.473 175.008,85.217 C175.156,85.961 175.813,86.917 175.046,86.492 zM167.532,87.343 C170.993,85.429 175.716,87.874 178.641,89.043 C181.566,90.213 181.082,90.850 183.718,90.744 C186.354,90.638 188.943,93.189 192.339,93.295 C195.735,93.402 197.285,94.783 199.427,94.996 C201.570,95.209 203.914,97.972 207.107,99.673 C210.299,101.374 214.286,104.456 216.382,107.326 C218.479,110.196 218.250,110.940 218.081,113.704 C217.912,116.468 215.697,118.062 214.199,118.381 C212.700,118.700 208.657,117.956 207.601,116.255 C206.545,114.554 201.793,106.901 201.793,106.901 C201.793,106.901 198.996,105.838 198.211,104.775 C197.425,103.712 196.021,102.968 193.134,103.074 C190.246,103.181 190.840,102.011 189.023,100.098 C187.207,98.185 185.332,98.504 183.444,98.397 C181.556,98.291 180.911,97.760 179.849,95.846 C178.787,93.933 176.518,93.720 174.746,93.295 C172.974,92.870 171.158,90.957 170.636,90.319 C170.115,89.681 167.991,90.106 166.577,89.043 C165.163,87.980 167.532,87.343 167.532,87.343 zM217.726,101.799 C218.219,101.480 220.958,100.630 222.740,101.374 C224.521,102.118 229.331,103.287 232.354,103.500 C235.376,103.712 236.093,106.689 237.482,106.901 C238.870,107.114 242.120,110.728 242.698,113.279 C243.277,115.830 239.306,117.531 237.309,117.956 C235.310,118.381 236.414,121.676 233.917,122.208 C231.419,122.739 224.699,120.720 223.297,120.082 C221.896,119.444 222.232,118.062 221.701,117.106 C221.170,116.149 221.278,111.366 220.442,108.602 C219.605,105.838 217.174,104.350 216.758,103.074 C216.343,101.799 217.726,101.799 217.726,101.799 z",
        },
        {
          name: "松江",
          color: "",
          areaInclude: true,
          textP: [90, 192],
          path:
            "M110.363,154.086 C110.351,154.062 110.336,154.036 110.323,154.011 C110.336,154.037 110.350,154.061 110.363,154.086 zM110.078,153.571 C110.060,153.541 110.044,153.512 110.026,153.482 C110.044,153.512 110.060,153.540 110.078,153.571 zM95.356,161.750 C95.942,161.155 96.628,160.560 97.354,161.325 C98.081,162.090 100.860,160.900 100.860,160.900 C100.860,160.900 100.309,159.284 99.779,158.349 C99.248,157.413 100.249,157.243 100.231,156.648 C100.213,156.053 103.340,156.393 104.742,156.223 C106.145,156.053 106.835,155.627 107.217,154.947 C107.599,154.267 110.736,154.947 110.736,154.947 C110.736,154.947 110.672,154.765 110.554,154.495 C110.559,154.506 110.567,154.523 110.572,154.534 C110.572,154.534 111.754,155.372 111.754,155.372 L112.307,157.073 C112.307,157.073 113.738,157.838 113.853,158.349 C113.969,158.859 113.585,159.454 114.407,160.049 C115.229,160.645 117.210,163.026 117.537,163.876 C117.864,164.726 118.693,165.577 118.631,166.852 C118.568,168.128 121.195,168.553 121.195,168.553 L122.251,170.254 L123.319,172.380 L123.358,173.655 L121.875,174.506 C121.875,174.506 122.531,176.291 121.435,176.632 C120.340,176.972 117.854,177.907 116.950,177.907 C116.045,177.907 115.454,178.332 115.454,178.332 L115.606,183.434 L116.210,186.836 L115.758,188.537 L118.284,188.962 L116.363,191.938 C116.363,191.938 115.511,193.724 115.433,194.489 C115.355,195.255 115.535,197.891 115.535,197.891 C115.535,197.891 118.244,197.721 120.071,198.316 C120.722,198.528 121.481,198.587 122.191,198.578 C122.172,198.533 122.161,198.506 122.146,198.471 C122.331,198.912 122.933,200.283 123.679,201.292 C124.577,202.507 123.421,204.694 123.805,205.544 C124.190,206.394 123.982,209.067 122.914,209.371 C121.846,209.674 121.724,210.403 122.462,211.072 C123.200,211.740 122.931,212.347 123.028,213.197 C123.101,213.832 122.236,213.858 121.586,213.931 C121.586,213.931 121.030,213.623 121.030,213.623 L119.045,214.473 C119.045,214.473 116.617,214.544 113.013,214.473 C111.333,214.440 110.679,214.438 110.453,214.445 C110.225,214.307 108.803,213.458 107.948,213.197 C107.018,212.914 107.044,213.764 107.497,214.898 C107.949,216.032 107.884,216.670 108.075,217.449 C108.266,218.229 106.098,218.583 105.600,218.725 C105.101,218.867 102.688,216.599 102.495,215.749 C102.302,214.898 100.627,214.898 100.459,214.898 C100.292,214.898 98.363,214.827 97.933,214.473 C97.504,214.119 96.873,212.631 96.852,211.922 C96.831,211.213 95.834,211.497 95.834,211.497 L93.836,211.922 C93.836,211.922 92.238,211.709 91.787,210.646 C91.337,209.583 89.942,210.575 87.327,212.772 C84.711,214.969 81.017,214.686 79.838,214.473 C78.658,214.260 76.784,213.197 75.791,213.623 C74.798,214.048 74.753,215.323 74.321,214.898 C73.889,214.473 72.639,214.686 71.292,214.473 C69.946,214.260 70.482,215.394 70.840,216.174 C71.199,216.953 71.974,217.662 71.406,218.300 C70.839,218.937 69.237,218.583 67.901,218.725 C66.564,218.867 66.585,219.575 65.903,219.150 C65.220,218.725 66.436,217.378 66.819,216.174 C67.202,214.969 67.017,214.402 66.253,214.048 C65.489,213.694 62.734,214.048 62.734,214.048 C62.734,214.048 60.673,212.347 60.686,212.772 C60.699,213.197 59.570,214.686 59.267,215.749 C58.963,216.811 60.851,218.300 60.851,218.300 C60.851,218.300 58.000,218.229 55.811,217.874 C53.623,217.520 52.900,218.583 50.810,218.725 C48.720,218.867 49.367,218.087 48.259,217.449 C47.151,216.811 47.630,216.032 47.190,215.323 C46.750,214.615 46.011,215.111 45.644,214.048 C45.277,212.985 45.669,212.064 46.071,211.497 C46.473,210.930 46.368,210.221 46.485,208.520 C46.601,206.820 45.931,206.820 45.931,206.820 C45.931,206.820 45.478,206.867 44.808,206.571 C44.808,206.571 46.396,205.544 46.396,205.544 C46.396,205.544 47.846,203.588 47.803,202.143 C47.760,200.697 48.267,200.867 48.267,200.867 C48.267,200.867 49.004,201.972 49.801,201.717 C50.597,201.462 52.500,204.609 53.433,205.544 C54.366,206.480 54.941,205.544 56.436,205.119 C57.932,204.694 58.831,204.524 58.409,203.843 C57.987,203.163 59.175,202.568 59.828,200.867 C60.481,199.166 59.765,198.741 59.224,197.466 C58.683,196.190 60.455,194.914 60.115,193.639 C59.776,192.363 57.642,191.598 56.508,190.663 C55.374,189.727 58.511,190.408 59.511,190.238 C60.512,190.067 59.788,189.387 58.933,187.686 C58.078,185.986 58.947,184.795 56.833,184.710 C54.720,184.625 55.096,183.775 55.262,182.584 C55.428,181.394 52.984,180.373 56.217,180.883 C59.449,181.394 58.276,182.499 59.258,181.734 C60.241,180.968 62.299,182.584 62.299,182.584 L65.277,181.309 L65.252,180.458 C65.252,180.458 63.889,178.587 63.165,177.907 C62.441,177.227 62.227,176.802 60.614,176.632 C59.000,176.461 58.900,176.461 58.565,175.356 C58.231,174.250 58.303,173.315 58.476,172.380 C58.650,171.444 60.130,170.509 61.404,169.403 C62.678,168.298 63.311,169.318 65.463,170.679 C67.615,172.040 67.788,171.104 68.504,171.529 C69.221,171.954 71.558,172.805 71.558,172.805 C71.558,172.805 71.211,171.274 71.997,170.679 C72.784,170.084 73.707,170.679 73.995,170.254 C74.284,169.829 74.983,169.658 75.453,168.553 C75.923,167.448 75.819,167.362 76.910,166.852 C78.001,166.342 77.998,166.257 77.362,165.151 C76.726,164.046 76.319,163.876 76.268,162.175 C76.217,160.475 78.844,160.900 79.748,160.900 C80.653,160.900 82.571,161.155 83.808,162.175 C85.045,163.196 85.285,161.155 86.283,160.900 C87.281,160.645 88.693,160.815 89.312,161.325 C89.930,161.835 87.930,165.577 87.930,165.577 C87.930,165.577 90.250,165.832 90.406,164.301 C90.561,162.771 91.662,162.600 92.353,162.175 C93.044,161.750 94.771,162.345 95.356,161.750 zM110.453,214.445 C110.473,214.457 110.500,214.473 110.500,214.473 C110.500,214.473 110.194,214.453 110.453,214.445 z",
        },
        {
          name: "闵行",
          color: "",
          areaInclude: true,
          textP: [136, 182],
          path:
            "M171.809,191.832 C171.809,191.832 169.192,193.639 169.192,193.639 C169.192,193.639 166.923,194.611 166.176,193.639 C165.429,192.667 163.358,193.031 162.142,193.214 C160.927,193.396 160.844,193.031 160.094,191.938 C159.343,190.845 157.909,190.906 157.052,191.088 C156.196,191.270 154.582,192.546 154.087,192.789 C153.592,193.031 152.917,192.060 152.541,191.513 C152.166,190.966 152.189,189.326 151.460,188.962 C150.731,188.597 148.252,189.751 146.974,190.238 C145.696,190.723 144.193,190.906 141.470,191.088 C138.747,191.270 136.679,194.186 136.557,194.914 C136.436,195.643 133.549,195.157 131.041,195.340 C128.533,195.522 124.920,197.162 123.565,197.466 C122.209,197.769 122.082,198.316 122.082,198.316 C122.082,198.316 122.121,198.415 122.191,198.578 C121.481,198.587 120.722,198.528 120.071,198.316 C118.244,197.721 115.535,197.891 115.535,197.891 C115.535,197.891 115.355,195.255 115.433,194.489 C115.511,193.724 116.363,191.938 116.363,191.938 L118.284,188.962 L115.758,188.537 L116.210,186.836 L115.606,183.434 L115.454,178.332 C115.454,178.332 116.045,177.907 116.950,177.907 C117.854,177.907 120.340,176.972 121.435,176.632 C122.531,176.291 121.875,174.506 121.875,174.506 L123.358,173.655 L123.319,172.380 L122.251,170.254 L121.195,168.553 C121.195,168.553 118.568,168.128 118.631,166.852 C118.693,165.577 117.864,164.726 117.537,163.876 C117.210,163.026 115.229,160.645 114.407,160.049 C113.585,159.454 113.969,158.859 113.853,158.349 C113.738,157.838 112.307,157.073 112.307,157.073 L111.754,155.372 C111.754,155.372 110.572,154.534 110.572,154.534 C110.338,153.992 109.858,153.035 109.152,152.396 C108.119,151.461 107.035,148.824 106.512,148.144 C105.989,147.464 105.059,146.614 104.978,147.294 C104.898,147.974 100.995,148.569 100.995,148.569 L97.388,145.593 C97.388,145.593 96.528,143.722 96.281,142.191 C96.035,140.661 92.915,137.174 92.585,136.239 C92.256,135.304 94.068,135.389 94.068,135.389 C94.068,135.389 93.912,135.302 93.912,135.302 C96.053,135.102 101.584,134.704 102.626,135.814 C103.924,137.196 106.227,138.577 108.282,140.066 C110.336,141.554 112.680,140.066 113.296,139.640 C113.911,139.215 115.146,138.471 116.261,137.940 C116.412,137.867 116.599,137.808 116.805,137.757 C116.322,138.348 115.826,139.000 115.796,139.215 C115.737,139.640 116.770,140.551 116.852,140.916 C116.935,141.280 116.828,142.495 115.923,143.467 C115.018,144.439 115.986,145.593 115.986,145.593 C115.986,145.593 116.247,147.111 116.552,147.719 C116.858,148.326 115.729,148.994 115.108,149.845 C114.487,150.695 116.151,151.120 116.151,151.120 C116.151,151.120 117.657,151.060 118.149,150.695 C118.641,150.331 121.729,150.331 122.673,150.695 C123.617,151.060 125.148,149.420 125.148,149.420 C125.148,149.420 126.187,148.144 126.605,147.719 C127.024,147.294 127.525,147.233 128.126,148.144 C128.728,149.055 129.647,148.569 131.657,148.569 C133.668,148.569 132.602,148.934 132.701,149.845 C132.800,150.756 133.254,151.546 132.751,151.546 C132.249,151.546 129.774,152.821 129.774,152.821 L128.341,155.372 C128.341,155.372 129.207,155.494 129.850,155.372 C130.492,155.251 131.376,155.980 131.886,156.223 C132.395,156.466 132.868,157.863 133.470,158.774 C134.071,159.685 135.151,162.175 135.607,163.026 C136.063,163.876 136.327,163.086 137.115,163.026 C137.903,162.965 138.061,163.451 139.654,163.876 C141.246,164.301 140.182,164.726 140.182,164.726 C140.182,164.726 140.139,165.698 140.722,166.002 C141.306,166.306 142.598,166.306 143.248,166.427 C143.898,166.549 143.194,167.034 143.312,168.553 C143.429,170.071 143.919,169.646 144.342,169.403 C144.766,169.160 145.812,168.128 145.812,168.128 C145.812,168.128 147.096,166.214 147.797,167.277 C148.499,168.340 148.143,167.632 148.777,166.427 C149.412,165.222 150.718,164.089 151.743,164.726 C152.767,165.364 154.719,166.214 154.797,166.002 C154.874,165.789 156.686,164.726 157.297,165.577 C157.909,166.427 158.075,166.356 159.333,166.427 C160.592,166.498 161.185,166.711 161.885,167.703 C162.584,168.695 163.678,168.836 165.429,168.553 C167.179,168.269 169.123,168.836 167.992,170.254 C166.862,171.671 165.957,172.238 166.070,173.230 C166.184,174.222 167.722,175.214 168.145,175.356 C168.568,175.498 169.251,175.923 168.183,176.632 C167.115,177.340 164.654,179.112 164.753,179.608 C164.851,180.104 163.633,181.379 163.811,181.734 C163.989,182.088 165.026,183.151 165.859,183.009 C166.693,182.868 167.857,182.584 167.896,183.860 C167.933,185.135 167.512,185.064 167.971,186.411 C168.430,187.757 168.383,188.962 169.053,188.962 C169.723,188.962 171.843,189.812 171.617,190.663 C171.504,191.088 171.642,191.513 171.809,191.832 z",
        },
        {
          name: "宝山",
          color: "",
          areaInclude: true,
          textP: [129, 106],
          path:
            "M150.847,100.949 C150.391,102.508 150.188,104.137 150.496,106.051 C150.805,107.964 151.502,108.885 153.124,109.877 C153.840,110.316 154.285,110.542 154.664,110.694 C154.664,110.694 154.657,110.728 154.657,110.728 L150.724,113.704 C150.724,113.704 150.622,113.066 150.750,114.554 C150.878,116.043 150.889,119.231 150.889,119.231 L149.909,120.082 L146.378,119.657 C146.378,119.657 144.462,120.011 144.367,119.657 C144.273,119.302 141.816,118.381 141.816,118.381 C141.816,118.381 139.726,118.523 138.813,118.806 C137.900,119.090 136.274,117.956 135.784,118.381 C135.294,118.806 135.345,120.507 135.345,120.507 C135.345,120.507 135.037,121.428 133.862,121.357 C132.687,121.287 132.528,121.570 132.392,122.633 C132.256,123.696 131.875,124.972 131.978,125.609 C132.081,126.247 131.552,128.160 131.552,128.160 C131.552,128.160 129.556,128.656 129.541,128.160 C129.526,127.664 130.715,125.397 129.452,125.184 C128.189,124.972 125.823,124.263 125.406,124.334 C124.989,124.405 124.222,123.979 121.875,123.909 C119.527,123.838 118.926,123.342 118.820,122.633 C118.715,121.924 117.287,121.783 117.287,121.783 L115.302,122.633 C115.302,122.633 113.883,122.158 113.883,122.158 C113.739,121.598 113.634,120.973 113.731,120.507 C113.950,119.444 114.585,119.657 114.183,118.806 C113.780,117.956 114.154,117.850 114.106,116.255 C114.059,114.661 113.937,114.767 112.523,113.704 C111.108,112.641 111.589,111.897 111.944,111.153 C112.299,110.409 112.119,108.602 111.830,107.326 C111.540,106.051 107.798,102.756 107.128,101.374 C106.459,99.992 107.081,99.779 110.056,98.397 C113.030,97.016 110.391,97.016 110.495,96.272 C110.598,95.527 110.171,93.827 110.896,92.870 C111.622,91.913 109.724,91.488 108.294,89.894 C106.864,88.299 104.997,84.685 105.075,83.091 C105.153,81.496 105.025,81.390 105.025,81.390 C105.025,81.390 102.844,79.902 102.435,78.839 C102.330,78.565 101.937,78.207 101.415,77.826 C101.472,76.941 101.573,75.437 102.837,75.437 C104.177,75.437 106.413,74.587 107.863,75.437 C109.313,76.288 109.192,77.847 110.452,77.989 C111.713,78.130 116.359,79.406 118.094,81.390 C120.609,81.461 122.976,82.170 125.182,83.091 C127.387,84.012 130.940,85.146 133.803,85.642 C136.666,86.138 139.443,86.563 142.437,88.618 C144.999,90.377 150.909,95.655 153.673,97.409 C152.398,98.697 151.074,100.173 150.847,100.949 z",
        },
        {
          name: "嘉定",
          color: "",
          areaInclude: true,
          textP: [89, 117],
          path:
            "M122.229,135.814 L120.269,137.514 C120.269,137.514 117.376,137.408 116.261,137.940 C115.146,138.471 113.911,139.215 113.296,139.640 C112.680,140.066 110.336,141.554 108.282,140.066 C106.227,138.577 103.924,137.196 102.626,135.814 C101.583,134.704 96.050,135.102 93.912,135.302 C93.912,135.302 92.535,134.538 92.535,134.538 C92.535,134.538 89.491,133.603 88.475,133.263 C87.460,132.923 85.459,133.263 83.977,134.113 C82.494,134.963 82.989,134.708 80.961,134.113 C78.932,133.518 80.091,135.304 79.001,135.814 C77.910,136.324 77.970,134.963 77.970,134.963 C77.970,134.963 76.535,134.028 75.934,134.113 C75.333,134.198 74.426,134.113 74.426,134.113 C74.426,134.113 72.880,134.113 72.880,134.113 C72.065,134.067 71.048,133.888 70.882,133.263 C70.599,132.200 70.699,129.932 70.253,129.011 C69.806,128.090 68.196,127.452 68.179,126.885 C68.162,126.318 68.421,123.767 68.090,123.909 C67.759,124.050 65.920,124.192 65.087,124.334 C64.253,124.475 62.573,124.334 62.561,123.909 C62.548,123.483 63.151,121.216 62.950,120.082 C62.748,118.948 63.393,118.098 62.358,117.106 C61.323,116.113 59.698,114.980 59.769,114.554 C59.840,114.129 61.163,113.562 59.228,113.279 C57.293,112.995 55.747,111.720 56.123,110.303 C56.500,108.885 62.443,105.909 64.529,105.626 C66.615,105.342 67.694,104.988 67.004,104.350 C66.315,103.712 65.703,102.862 65.936,102.224 C66.168,101.586 68.499,101.090 68.386,100.098 C68.272,99.106 67.845,98.823 67.845,98.823 C67.845,98.823 66.466,97.547 66.286,97.122 C66.106,96.697 68.439,96.272 68.761,95.846 C69.084,95.421 69.226,94.571 69.226,94.571 C69.226,94.571 68.183,93.295 67.177,93.295 C66.172,93.295 65.739,92.799 65.631,92.020 C65.525,91.240 69.952,90.815 71.110,90.319 C72.268,89.823 76.599,86.138 76.990,85.217 C77.381,84.295 78.870,83.658 79.955,83.516 C81.040,83.374 81.560,83.941 82.456,83.091 C83.352,82.240 84.212,80.185 85.383,80.114 C86.554,80.044 88.973,82.524 89.983,82.666 C90.992,82.807 92.699,81.036 93.941,80.540 C95.183,80.044 101.346,78.839 101.405,77.989 C101.408,77.940 101.412,77.880 101.415,77.826 C101.937,78.207 102.330,78.565 102.435,78.839 C102.844,79.902 105.025,81.390 105.025,81.390 C105.025,81.390 105.153,81.496 105.075,83.091 C104.997,84.685 106.864,88.299 108.294,89.894 C109.724,91.488 111.622,91.913 110.896,92.870 C110.171,93.827 110.598,95.527 110.495,96.272 C110.391,97.016 113.030,97.016 110.056,98.397 C107.081,99.779 106.459,99.992 107.128,101.374 C107.798,102.756 111.540,106.051 111.830,107.326 C112.119,108.602 112.299,110.409 111.944,111.153 C111.589,111.897 111.108,112.641 112.523,113.704 C113.937,114.767 114.059,114.661 114.106,116.255 C114.154,117.850 113.780,117.956 114.183,118.806 C114.585,119.657 113.950,119.444 113.731,120.507 C113.511,121.570 114.322,123.483 114.322,123.483 L112.387,126.035 C112.387,126.035 112.026,126.566 112.941,127.735 C113.855,128.904 116.020,129.861 116.020,129.861 C116.020,129.861 120.135,128.798 121.047,129.861 C121.958,130.924 120.092,131.562 120.092,131.562 C120.092,131.562 120.617,132.306 121.651,133.263 C122.684,134.219 122.229,135.814 122.229,135.814 z",
        },
        {
          name: "青浦",
          color: "",
          areaInclude: true,
          textP: [58, 164],
          path:
            "M107.217,154.947 C106.835,155.627 106.145,156.053 104.742,156.223 C103.340,156.393 100.213,156.053 100.231,156.648 C100.249,157.243 99.248,157.413 99.779,158.349 C100.309,159.284 100.860,160.900 100.860,160.900 C100.860,160.900 98.081,162.090 97.354,161.325 C96.628,160.560 95.942,161.155 95.356,161.750 C94.771,162.345 93.044,161.750 92.353,162.175 C91.662,162.600 90.561,162.771 90.406,164.301 C90.250,165.832 87.930,165.577 87.930,165.577 C87.930,165.577 89.930,161.835 89.312,161.325 C88.693,160.815 87.281,160.645 86.283,160.900 C85.285,161.155 85.045,163.196 83.808,162.175 C82.571,161.155 80.653,160.900 79.748,160.900 C78.844,160.900 76.217,160.475 76.268,162.175 C76.319,163.876 76.726,164.046 77.362,165.151 C77.998,166.257 78.001,166.342 76.910,166.852 C75.819,167.362 75.923,167.448 75.453,168.553 C74.983,169.658 74.284,169.829 73.995,170.254 C73.707,170.679 72.784,170.084 71.997,170.679 C71.211,171.274 71.558,172.805 71.558,172.805 C71.558,172.805 69.221,171.954 68.504,171.529 C67.788,171.104 67.615,172.040 65.463,170.679 C63.311,169.318 62.678,168.298 61.404,169.403 C60.130,170.509 58.650,171.444 58.476,172.380 C58.303,173.315 58.231,174.250 58.565,175.356 C58.900,176.461 59.000,176.461 60.614,176.632 C62.227,176.802 62.441,177.227 63.165,177.907 C63.889,178.587 65.252,180.458 65.252,180.458 L65.277,181.309 L62.299,182.584 C62.299,182.584 60.241,180.968 59.258,181.734 C58.276,182.499 59.449,181.394 56.217,180.883 C52.984,180.373 55.428,181.394 55.262,182.584 C55.096,183.775 54.720,184.625 56.833,184.710 C58.947,184.795 58.078,185.986 58.933,187.686 C59.788,189.387 60.512,190.067 59.511,190.238 C58.511,190.408 55.374,189.727 56.508,190.663 C57.642,191.598 59.776,192.363 60.115,193.639 C60.455,194.914 58.683,196.190 59.224,197.466 C59.765,198.741 60.481,199.166 59.828,200.867 C59.175,202.568 57.987,203.163 58.409,203.843 C58.831,204.524 57.932,204.694 56.436,205.119 C54.941,205.544 54.366,206.480 53.433,205.544 C52.500,204.609 50.597,201.462 49.801,201.717 C49.004,201.972 48.267,200.867 48.267,200.867 C48.267,200.867 47.760,200.697 47.803,202.143 C47.846,203.588 46.396,205.544 46.396,205.544 C46.396,205.544 44.804,206.574 44.804,206.574 C44.394,206.392 43.903,206.080 43.380,205.544 C42.932,205.085 42.291,204.754 41.633,204.504 C42.260,204.245 42.485,204.001 41.319,203.843 C39.216,203.560 38.855,202.709 39.232,201.292 C39.609,199.875 41.654,198.245 42.134,197.466 C42.613,196.686 43.541,196.899 41.568,195.340 C39.595,193.781 37.917,193.710 39.456,191.938 C40.995,190.167 43.464,188.678 40.347,188.112 C37.231,187.545 34.914,188.537 32.769,186.836 C30.624,185.135 29.566,183.364 28.672,184.285 C27.778,185.206 27.680,187.545 24.739,187.261 C21.799,186.978 19.415,185.702 18.167,185.986 C16.918,186.269 14.510,186.978 14.158,186.411 C13.806,185.844 14.797,185.348 15.603,184.285 C16.409,183.222 14.647,183.151 14.019,181.734 C13.390,180.316 13.888,180.175 13.943,179.183 C13.997,178.190 13.050,177.340 13.867,176.632 C14.683,175.923 16.597,175.498 14.821,174.931 C13.045,174.364 13.317,172.238 11.729,172.380 C10.142,172.521 8.500,173.655 7.243,173.655 C5.987,173.655 4.929,171.884 1.173,172.380 C1.173,172.380 5.147,170.785 5.621,169.829 C6.096,168.872 5.552,167.490 8.536,166.427 C11.520,165.364 9.871,164.833 13.022,165.151 C16.173,165.470 27.982,165.364 31.118,165.151 C34.253,164.939 37.897,164.939 40.630,163.876 C43.363,162.813 43.451,162.955 44.123,163.026 C44.796,163.096 46.521,161.963 47.076,160.900 C47.631,159.837 48.565,160.262 49.564,160.049 C50.563,159.837 53.819,159.482 54.514,157.498 C55.209,155.514 55.225,153.246 54.362,152.396 C53.499,151.546 50.365,147.577 50.125,145.168 C49.886,142.759 50.132,139.782 50.413,137.940 C50.693,136.097 49.737,134.963 50.814,134.538 C51.890,134.113 53.078,134.609 53.289,133.263 C53.500,131.916 52.212,130.853 54.219,130.712 C56.225,130.570 65.675,130.003 66.798,131.137 C67.921,132.271 69.839,134.822 70.933,134.963 C72.026,135.105 73.924,134.113 73.924,134.113 L74.426,134.113 C74.426,134.113 75.333,134.198 75.934,134.113 C76.535,134.028 77.970,134.963 77.970,134.963 C77.970,134.963 77.910,136.324 79.001,135.814 C80.091,135.304 78.932,133.518 80.961,134.113 C82.989,134.708 82.494,134.963 83.977,134.113 C85.459,133.263 87.460,132.923 88.475,133.263 C89.491,133.603 92.535,134.538 92.535,134.538 L94.068,135.389 C94.068,135.389 92.256,135.304 92.585,136.239 C92.915,137.174 96.035,140.661 96.281,142.191 C96.528,143.722 97.388,145.593 97.388,145.593 L100.995,148.569 C100.995,148.569 104.898,147.974 104.978,147.294 C105.059,146.614 105.989,147.464 106.512,148.144 C107.035,148.824 108.119,151.461 109.152,152.396 C110.185,153.331 110.736,154.947 110.736,154.947 C110.736,154.947 107.599,154.267 107.217,154.947 zM72.880,134.113 C72.880,134.113 73.924,134.113 73.924,134.113 C73.924,134.113 73.450,134.145 72.880,134.113 z",
        },
        {
          name: "金山",
          color: "",
          areaInclude: true,
          textP: [101, 238],
          path:
            "M121.043,214.048 C120.547,214.291 121.858,214.898 122.086,215.323 C122.314,215.749 122.351,216.963 123.180,218.300 C124.010,219.636 125.393,220.243 126.272,220.851 C127.152,221.458 127.965,222.248 128.359,223.402 C128.752,224.556 129.804,230.934 129.102,231.480 C128.401,232.027 128.135,232.756 128.135,232.756 C128.135,232.756 129.105,233.971 129.681,234.032 C130.257,234.092 131.158,232.999 132.156,232.756 C133.155,232.513 134.180,233.181 134.180,233.181 C134.180,233.181 133.426,234.396 133.728,234.882 C134.029,235.368 135.685,235.489 136.769,235.732 C137.853,235.975 138.290,236.157 138.290,236.157 L138.830,237.433 L140.313,236.583 L141.846,237.433 C141.846,237.433 142.871,238.101 143.882,238.283 C144.781,238.445 148.159,242.010 148.898,242.800 C147.695,243.711 146.674,244.437 146.083,244.661 C144.592,245.228 142.747,245.157 142.125,246.787 C141.503,248.417 142.710,249.551 140.693,249.338 C138.676,249.126 136.431,249.693 136.220,251.039 C136.009,252.385 129.561,258.125 127.451,260.393 C125.340,262.661 123.846,265.920 122.086,265.920 C120.327,265.920 113.432,265.070 111.041,266.346 C108.649,267.621 104.898,268.259 104.506,266.346 C104.114,264.432 104.848,260.960 103.260,258.267 C101.672,255.574 99.917,255.716 98.132,254.866 C96.347,254.015 94.952,252.173 93.443,249.338 C91.935,246.504 89.052,245.370 86.833,246.787 C84.613,248.204 81.206,249.126 79.343,248.488 C77.481,247.850 76.116,247.000 73.776,247.212 C71.437,247.425 68.434,247.850 68.686,245.086 C68.939,242.323 70.787,236.866 71.423,235.732 C72.060,234.598 71.291,234.102 69.362,234.032 C67.433,233.961 66.783,231.835 66.760,231.055 C66.737,230.276 62.133,230.417 60.716,230.630 C59.298,230.843 56.985,229.142 54.722,231.906 C52.458,234.669 53.663,235.732 50.802,235.307 C47.941,234.882 45.180,232.189 43.211,233.606 C41.243,235.024 41.184,235.874 39.253,235.732 C37.322,235.590 35.531,234.527 36.664,233.181 C37.797,231.835 42.215,228.292 43.524,227.229 C44.833,226.166 45.327,225.882 44.943,224.252 C44.559,222.622 44.100,221.276 43.334,220.851 C42.567,220.426 41.610,219.221 42.265,218.725 C42.920,218.229 43.184,218.654 41.247,218.300 C39.310,217.945 38.132,217.804 38.683,216.599 C39.233,215.394 40.293,214.402 40.630,214.473 C40.967,214.544 42.802,214.260 42.113,213.623 C41.424,212.985 41.717,214.402 40.580,212.772 C39.442,211.142 41.262,210.363 40.968,208.946 C40.675,207.528 42.285,208.166 40.402,206.820 C38.519,205.473 38.689,205.544 39.849,205.119 C40.365,204.930 41.129,204.712 41.633,204.504 C42.291,204.754 42.932,205.085 43.380,205.544 C44.763,206.961 45.931,206.820 45.931,206.820 C45.931,206.820 46.601,206.820 46.485,208.520 C46.368,210.221 46.473,210.930 46.071,211.497 C45.669,212.064 45.277,212.985 45.644,214.048 C46.011,215.111 46.750,214.615 47.190,215.323 C47.630,216.032 47.151,216.811 48.259,217.449 C49.367,218.087 48.720,218.867 50.810,218.725 C52.900,218.583 53.623,217.520 55.811,217.874 C58.000,218.229 60.851,218.300 60.851,218.300 C60.851,218.300 58.963,216.811 59.267,215.749 C59.570,214.686 60.699,213.197 60.686,212.772 C60.673,212.347 62.734,214.048 62.734,214.048 C62.734,214.048 65.489,213.694 66.253,214.048 C67.017,214.402 67.202,214.969 66.819,216.174 C66.436,217.378 65.220,218.725 65.903,219.150 C66.585,219.575 66.564,218.867 67.901,218.725 C69.237,218.583 70.839,218.937 71.406,218.300 C71.974,217.662 71.199,216.953 70.840,216.174 C70.482,215.394 69.946,214.260 71.292,214.473 C72.639,214.686 73.889,214.473 74.321,214.898 C74.753,215.323 74.798,214.048 75.791,213.623 C76.784,213.197 78.658,214.260 79.838,214.473 C81.017,214.686 84.711,214.969 87.327,212.772 C89.942,210.575 91.337,209.583 91.787,210.646 C92.238,211.709 93.836,211.922 93.836,211.922 L95.834,211.497 C95.834,211.497 96.831,211.213 96.852,211.922 C96.873,212.631 97.504,214.119 97.933,214.473 C98.363,214.827 100.292,214.898 100.459,214.898 C100.627,214.898 102.302,214.898 102.495,215.749 C102.688,216.599 105.101,218.867 105.600,218.725 C106.098,218.583 108.266,218.229 108.075,217.449 C107.884,216.670 107.949,216.032 107.497,214.898 C107.044,213.764 107.018,212.914 107.948,213.197 C108.803,213.458 110.225,214.307 110.453,214.445 C110.194,214.453 110.500,214.473 110.500,214.473 C110.500,214.473 110.473,214.457 110.453,214.445 C110.679,214.438 111.333,214.440 113.013,214.473 C116.617,214.544 119.045,214.473 119.045,214.473 L121.030,213.623 C121.030,213.623 121.586,213.931 121.586,213.931 C121.365,213.956 121.169,213.986 121.043,214.048 z",
        },
        {
          name: "奉贤",
          color: "",
          areaInclude: true,
          textP: [165, 219],
          path:
            "M151.460,188.962 C152.189,189.326 152.166,190.966 152.541,191.513 C152.917,192.060 153.592,193.031 154.087,192.789 C154.582,192.546 156.196,191.270 157.052,191.088 C157.909,190.906 159.343,190.845 160.094,191.938 C160.844,193.031 160.927,193.396 162.142,193.214 C163.358,193.031 165.429,192.667 166.176,193.639 C166.923,194.611 169.192,193.639 169.192,193.639 C169.192,193.639 171.809,191.832 171.809,191.832 C171.975,192.151 172.170,192.363 172.170,192.363 C172.170,192.363 175.157,191.371 177.171,191.513 C179.186,191.655 182.359,191.300 183.229,192.363 C184.098,193.426 183.866,194.064 185.277,193.639 C186.689,193.214 190.957,193.072 191.812,193.639 C192.667,194.206 195.281,194.773 197.882,194.914 C200.483,195.056 202.228,194.560 203.424,195.340 C204.620,196.119 206.983,196.700 207.998,197.040 C209.014,197.381 211.289,199.507 212.636,200.867 C213.984,202.228 212.672,202.058 215.703,202.568 C218.734,203.078 219.657,203.673 219.787,204.694 C219.918,205.714 220.366,207.245 220.366,207.245 C220.366,207.245 222.792,207.670 223.433,208.946 C224.074,210.221 224.932,212.007 224.578,213.623 C224.224,215.238 223.860,216.514 224.189,217.449 C224.519,218.385 225.921,218.215 224.290,220.851 C222.660,223.487 222.402,224.933 222.432,225.953 C222.439,226.197 222.627,226.642 222.905,227.174 C222.179,227.448 221.527,227.746 220.987,228.079 C217.433,229.709 209.701,228.858 206.926,228.504 C204.150,228.150 196.825,229.709 193.404,230.205 C189.984,230.701 179.791,231.622 177.383,232.331 C174.975,233.039 171.588,234.669 169.919,234.882 C168.250,235.094 166.710,234.032 165.395,234.882 C164.080,235.732 163.521,236.653 161.437,237.008 C159.353,237.362 158.145,236.157 154.941,238.283 C153.009,239.565 150.732,241.410 148.899,242.800 C148.162,242.013 144.781,238.445 143.882,238.283 C142.871,238.101 141.846,237.433 141.846,237.433 L140.313,236.583 L138.830,237.433 L138.290,236.157 C138.290,236.157 137.853,235.975 136.769,235.732 C135.685,235.489 134.029,235.368 133.728,234.882 C133.426,234.396 134.180,233.181 134.180,233.181 C134.180,233.181 133.155,232.513 132.156,232.756 C131.158,232.999 130.257,234.092 129.681,234.032 C129.105,233.971 128.135,232.756 128.135,232.756 C128.135,232.756 128.401,232.027 129.102,231.480 C129.804,230.934 128.752,224.556 128.359,223.402 C127.965,222.248 127.152,221.458 126.272,220.851 C125.393,220.243 124.010,219.636 123.180,218.300 C122.351,216.963 122.314,215.749 122.086,215.323 C121.858,214.898 120.547,214.291 121.043,214.048 C121.538,213.805 123.125,214.048 123.028,213.197 C122.931,212.347 123.200,211.740 122.462,211.072 C121.724,210.403 121.846,209.674 122.914,209.371 C123.982,209.067 124.190,206.394 123.805,205.544 C123.421,204.694 124.577,202.507 123.679,201.292 C122.781,200.077 122.082,198.316 122.082,198.316 C122.082,198.316 122.209,197.769 123.565,197.466 C124.920,197.162 128.533,195.522 131.041,195.340 C133.549,195.157 136.436,195.643 136.557,194.914 C136.679,194.186 138.747,191.270 141.470,191.088 C144.193,190.906 145.696,190.723 146.974,190.238 C148.252,189.751 150.731,188.597 151.460,188.962 z",
        },
        {
          name: "浦东",
          color: "",
          areaInclude: true,
          textP: [198, 171],
          path:
            "M254.074,225.103 C246.801,224.586 230.371,224.374 222.911,227.187 C222.630,226.649 222.439,226.199 222.432,225.953 C222.402,224.933 222.660,223.487 224.290,220.851 C225.921,218.215 224.519,218.385 224.189,217.449 C223.860,216.514 224.224,215.238 224.578,213.623 C224.932,212.007 224.074,210.221 223.433,208.946 C222.792,207.670 220.366,207.245 220.366,207.245 C220.366,207.245 219.918,205.714 219.787,204.694 C219.657,203.673 218.734,203.078 215.703,202.568 C212.672,202.058 213.984,202.228 212.636,200.867 C211.289,199.507 209.014,197.381 207.998,197.040 C206.983,196.700 204.620,196.119 203.424,195.340 C202.228,194.560 200.483,195.056 197.882,194.914 C195.281,194.773 192.667,194.206 191.812,193.639 C190.957,193.072 186.689,193.214 185.277,193.639 C183.866,194.064 184.098,193.426 183.229,192.363 C182.359,191.300 179.186,191.655 177.171,191.513 C175.157,191.371 172.170,192.363 172.170,192.363 C172.170,192.363 171.391,191.513 171.617,190.663 C171.843,189.812 169.723,188.962 169.053,188.962 C168.383,188.962 168.430,187.757 167.971,186.411 C167.512,185.064 167.933,185.135 167.896,183.860 C167.857,182.584 166.693,182.868 165.859,183.009 C165.026,183.151 163.989,182.088 163.811,181.734 C163.633,181.379 164.851,180.104 164.753,179.608 C164.654,179.112 167.115,177.340 168.183,176.632 C169.251,175.923 168.568,175.498 168.145,175.356 C167.722,175.214 166.184,174.222 166.070,173.230 C165.957,172.238 166.862,171.671 167.992,170.254 C169.123,168.836 167.179,168.269 165.429,168.553 C163.678,168.836 162.584,168.695 161.885,167.703 C161.185,166.711 160.592,166.498 159.333,166.427 C158.075,166.356 157.909,166.427 157.297,165.577 C156.686,164.726 154.874,165.789 154.797,166.002 C154.719,166.214 152.767,165.364 151.743,164.726 C150.718,164.089 149.412,165.222 148.777,166.427 C148.143,167.632 148.499,168.340 147.797,167.277 C147.096,166.214 145.812,168.128 145.812,168.128 C145.812,168.128 145.692,166.923 146.251,166.002 C146.810,165.081 146.624,164.443 145.660,163.026 C144.696,161.608 144.424,160.900 144.553,159.624 C144.683,158.349 146.241,157.215 146.463,156.223 C146.684,155.231 145.902,151.475 145.782,150.270 C145.663,149.065 146.187,149.774 147.253,148.994 C148.318,148.215 149.964,147.223 151.198,146.443 C152.431,145.664 152.548,143.963 152.604,143.042 C152.661,142.121 150.794,138.507 149.926,137.514 C149.059,136.522 150.133,136.026 150.881,135.814 C151.629,135.601 152.722,135.743 152.879,135.389 C153.036,135.034 154.110,134.538 154.877,134.963 C155.643,135.389 158.707,134.184 161.348,132.837 C163.989,131.491 165.783,129.861 166.273,129.436 C166.763,129.011 167.012,126.105 166.624,124.334 C166.236,122.562 164.335,117.814 164.372,116.255 C164.410,114.696 162.569,114.767 161.783,113.704 C160.997,112.641 157.361,111.507 156.178,111.153 C154.994,110.799 154.745,110.870 153.124,109.877 C151.502,108.885 150.805,107.964 150.496,106.051 C150.188,104.137 150.391,102.508 150.847,100.949 C151.074,100.173 152.398,98.697 153.673,97.409 C154.138,97.704 154.524,97.911 154.779,97.972 C156.551,98.397 169.107,103.641 174.109,105.626 C179.111,107.610 185.975,113.066 188.475,115.405 C190.974,117.743 193.798,122.562 195.753,123.483 C197.707,124.405 200.627,126.814 202.439,128.586 C204.251,130.357 207.306,134.467 209.202,136.239 C211.098,138.011 213.949,140.916 215.436,143.042 C216.924,145.168 221.295,151.262 222.740,151.971 C224.185,152.679 223.469,153.955 223.821,154.522 C224.173,155.089 232.173,162.104 235.197,165.151 C238.220,168.199 244.901,178.757 246.749,181.734 C248.597,184.710 252.411,191.796 254.129,193.214 C255.847,194.631 258.171,199.521 259.396,201.292 C260.622,203.064 266.873,210.434 266.839,214.898 C266.805,219.363 262.050,225.670 254.074,225.103 z",
        },
        {
          name: "普陀",
          color: "",
          areaInclude: true,
          textP: [120, 135],
          path:
            "M135.995,134.246 C135.826,134.432 135.353,136.179 135.353,136.179 L134.846,136.773 L132.777,137.814 L132.274,138.557 L130.543,139.152 L126.895,140.044 C126.895,140.044 125.859,140.490 125.325,140.193 C124.792,139.895 123.121,139.598 122.854,139.449 C122.587,139.301 120.545,138.260 120.545,138.260 C120.545,138.260 120.154,137.430 120.154,137.430 C120.308,137.432 120.400,137.436 120.400,137.436 L122.349,135.744 C122.349,135.744 122.801,134.158 121.774,133.207 C120.746,132.255 120.224,131.515 120.224,131.515 C120.224,131.515 122.080,130.881 121.174,129.824 C120.268,128.766 116.176,129.824 116.176,129.824 C116.176,129.824 114.025,128.872 113.116,127.709 C112.206,126.546 112.566,126.018 112.566,126.018 L114.489,123.480 C114.489,123.480 114.234,122.877 114.049,122.161 C114.049,122.161 115.464,122.635 115.464,122.635 L117.438,121.789 C117.438,121.789 118.858,121.930 118.962,122.635 C119.066,123.339 119.664,123.833 121.998,123.903 C124.332,123.974 125.094,124.397 125.508,124.326 C125.923,124.256 128.275,124.960 129.531,125.172 C130.787,125.383 129.604,127.639 129.619,128.132 C129.633,128.626 131.618,128.132 131.618,128.132 C131.618,128.132 131.620,128.125 131.621,128.122 C131.621,128.122 131.809,128.746 131.809,128.746 L132.325,128.449 L133.392,129.043 C133.392,129.043 134.905,129.935 135.006,130.381 C135.107,130.827 135.221,131.719 135.221,131.719 C135.221,131.719 135.970,131.905 135.938,132.314 C135.907,132.723 136.165,134.061 135.995,134.246 z",
        },
        {
          name: "静安",
          color: "",
          areaInclude: true,
          textP: [137, 137],
          path:
            "M149.858,136.208 C149.867,136.200 149.873,136.191 149.882,136.184 C149.882,136.184 149.882,136.184 149.882,136.184 C149.892,136.177 149.903,136.171 149.913,136.164 C149.894,136.178 149.876,136.193 149.858,136.208 zM149.721,136.342 C149.726,136.336 149.734,136.331 149.739,136.324 C149.734,136.331 149.727,136.336 149.722,136.343 C149.722,136.343 149.721,136.342 149.721,136.342 zM148.093,135.138 L146.689,134.990 L145.289,134.990 L144.082,135.584 L143.041,135.882 C143.041,135.882 142.328,135.406 141.983,135.584 C141.638,135.763 140.511,135.495 140.417,135.882 C140.324,136.268 140.889,136.446 140.964,136.625 C141.040,136.803 142.211,137.368 142.211,137.368 C142.211,137.368 142.543,137.963 142.587,138.260 C142.631,138.557 143.138,139.122 143.322,139.449 C143.507,139.776 142.993,140.133 142.833,140.639 C142.673,141.144 141.814,141.679 141.814,141.679 L140.782,142.274 C140.782,142.274 139.554,142.155 139.212,142.422 C138.870,142.690 137.821,142.720 137.821,142.720 L137.183,142.994 L136.762,142.422 L135.503,141.233 C135.503,141.233 135.185,140.601 134.772,140.193 C134.289,139.714 133.700,139.449 133.700,139.449 L132.616,138.260 L132.514,138.203 L132.777,137.814 L134.846,136.773 L135.353,136.179 C135.353,136.179 135.826,134.432 135.995,134.246 C136.165,134.061 135.907,132.723 135.938,132.314 C135.970,131.905 135.221,131.719 135.221,131.719 C135.221,131.719 135.107,130.827 135.006,130.381 C134.905,129.935 133.392,129.043 133.392,129.043 L132.325,128.449 L131.809,128.746 C131.809,128.746 131.621,128.122 131.621,128.122 C131.660,127.977 132.140,126.203 132.042,125.595 C131.940,124.960 132.319,123.692 132.454,122.635 C132.590,121.577 132.748,121.295 133.916,121.366 C135.084,121.436 135.390,120.520 135.390,120.520 C135.390,120.520 135.340,118.829 135.827,118.406 C136.314,117.983 137.930,119.110 138.838,118.829 C139.746,118.547 141.824,118.406 141.824,118.406 C141.824,118.406 144.094,119.258 144.340,119.634 C144.340,119.634 143.305,121.165 143.305,121.165 C143.305,121.165 143.718,121.796 143.682,122.057 C143.645,122.317 143.285,123.432 143.201,123.543 C143.117,123.655 142.221,124.435 142.375,125.178 C142.528,125.922 142.440,127.408 142.440,127.408 C142.440,127.408 143.037,128.337 143.714,129.043 C144.391,129.750 146.609,132.314 146.609,132.314 L146.654,133.800 L147.030,134.692 L148.088,134.990 L149.510,135.733 L149.692,135.956 L148.622,135.287 L148.093,135.138 zM131.569,128.144 C131.482,128.164 131.279,128.210 131.032,128.254 C131.276,128.211 131.480,128.165 131.569,128.144 zM137.290,143.420 L137.297,143.329 L137.352,143.433 L137.290,143.420 z",
        },
        {
          name: "长宁",
          color: "",
          areaInclude: true,
          textP: [124, 151],
          path:
            "M137.183,144.801 L136.002,146.287 L134.118,147.625 C134.118,147.625 132.927,148.663 132.927,148.663 C132.874,148.506 132.602,148.431 131.719,148.431 C129.721,148.431 128.807,148.914 128.209,148.008 C127.611,147.102 127.113,147.162 126.697,147.585 C126.281,148.008 125.248,149.276 125.248,149.276 C125.248,149.276 123.726,150.908 122.787,150.545 C121.848,150.183 118.779,150.183 118.290,150.545 C117.801,150.908 116.303,150.968 116.303,150.968 C116.303,150.968 114.649,150.545 115.266,149.699 C115.884,148.854 117.006,148.189 116.703,147.585 C116.399,146.981 116.140,145.470 116.140,145.470 C116.140,145.470 115.178,144.323 116.078,143.356 C116.977,142.389 117.084,141.181 117.002,140.819 C116.920,140.456 115.894,139.550 115.952,139.127 C115.982,138.913 116.475,138.266 116.954,137.679 C117.996,137.422 119.567,137.421 120.154,137.430 C120.154,137.430 120.545,138.260 120.545,138.260 C120.545,138.260 122.587,139.301 122.854,139.449 C123.121,139.598 124.792,139.895 125.325,140.193 C125.859,140.490 126.895,140.044 126.895,140.044 L130.543,139.152 L132.274,138.557 L132.514,138.203 L132.616,138.260 L133.700,139.449 C133.700,139.449 134.289,139.714 134.772,140.193 C135.185,140.601 135.503,141.233 135.503,141.233 L136.762,142.422 L137.309,143.166 L137.183,144.801 zM120.316,137.433 C120.309,137.433 120.297,137.433 120.289,137.433 C120.301,137.433 120.306,137.433 120.316,137.433 z",
        },
        {
          name: "徐汇",
          color: "",
          areaInclude: true,
          textP: [137, 160],
          path:
            "M132.807,151.246 C133.307,151.246 132.855,150.461 132.756,149.555 C132.713,149.151 132.891,148.861 132.934,148.657 C132.934,148.657 134.118,147.625 134.118,147.625 L136.002,146.287 L137.183,144.801 L137.297,143.329 L137.686,144.058 L138.941,145.098 L139.851,146.287 C139.851,146.287 141.202,147.001 141.452,147.179 C141.702,147.358 143.089,148.131 143.416,148.517 C143.742,148.904 145.367,149.409 145.367,149.409 C145.367,149.409 145.767,149.610 145.767,149.610 C145.768,149.605 145.775,149.609 145.776,149.605 C145.747,149.720 145.737,149.873 145.762,150.122 C145.881,151.320 146.658,155.056 146.437,156.043 C146.216,157.029 144.667,158.157 144.538,159.426 C144.410,160.694 144.680,161.399 145.638,162.809 C146.596,164.218 146.781,164.853 146.226,165.769 C145.779,166.506 145.768,167.414 145.781,167.746 C145.741,167.786 144.740,168.771 144.327,169.008 C143.906,169.249 143.419,169.672 143.302,168.162 C143.186,166.652 143.886,166.168 143.240,166.047 C142.594,165.927 141.309,165.927 140.729,165.625 C140.148,165.322 140.191,164.356 140.191,164.356 C140.191,164.356 141.250,163.933 139.667,163.510 C138.083,163.087 137.926,162.604 137.143,162.664 C136.359,162.725 136.097,163.510 135.644,162.664 C135.190,161.818 134.117,159.342 133.519,158.435 C132.921,157.529 132.452,156.140 131.945,155.898 C131.438,155.656 130.560,154.931 129.921,155.052 C129.282,155.173 128.422,155.052 128.422,155.052 L129.846,152.515 C129.846,152.515 132.307,151.246 132.807,151.246 z",
        },
        {
          name: "黄浦",
          color: "",
          areaInclude: true,
          textP: [149, 146],
          path:
            "M144.082,135.584 L145.289,134.990 L146.689,134.990 L148.093,135.138 L148.622,135.287 L149.692,135.956 L149.873,136.179 C149.873,136.179 149.882,136.184 149.882,136.184 C149.531,136.465 149.388,136.869 149.884,137.436 C150.746,138.422 152.601,142.017 152.545,142.933 C152.489,143.849 152.373,145.541 151.146,146.316 C149.920,147.092 148.283,148.078 147.223,148.854 C146.373,149.475 145.871,149.147 145.767,149.610 C145.767,149.610 145.367,149.409 145.367,149.409 C145.367,149.409 143.742,148.904 143.416,148.517 C143.089,148.131 141.702,147.358 141.452,147.179 C141.202,147.001 139.851,146.287 139.851,146.287 L138.941,145.098 L137.686,144.058 L137.130,143.017 L137.821,142.720 C137.821,142.720 138.870,142.690 139.212,142.422 C139.554,142.155 140.782,142.274 140.782,142.274 L141.814,141.679 C141.814,141.679 142.673,141.144 142.833,140.639 C142.993,140.133 143.507,139.776 143.322,139.449 C143.138,139.122 142.631,138.557 142.587,138.260 C142.543,137.963 142.211,137.368 142.211,137.368 C142.211,137.368 141.040,136.803 140.964,136.625 C140.889,136.446 140.324,136.268 140.417,135.882 C140.511,135.495 141.638,135.763 141.983,135.584 C142.328,135.406 143.041,135.882 143.041,135.882 L144.082,135.584 z",
        },
        {
          name: "虹口",
          color: "",
          areaInclude: true,
          textP: [148, 130],
          path:
            "M150.844,119.236 C150.844,119.228 150.844,119.216 150.844,119.202 C150.844,119.216 150.844,119.228 150.844,119.236 zM150.844,119.239 C150.844,119.247 150.844,119.251 150.844,119.251 L149.869,120.097 L149.570,120.061 L149.594,120.867 C149.594,120.867 148.644,122.255 149.302,122.800 C149.959,123.345 151.279,124.584 151.279,124.584 C151.279,124.584 151.702,125.079 151.660,125.624 C151.618,126.169 152.338,126.863 152.408,127.259 C152.478,127.656 153.991,127.557 153.991,127.557 C153.991,127.557 154.770,128.251 154.726,128.746 C154.683,129.242 154.420,130.233 154.420,130.233 C154.420,130.233 154.088,130.827 154.626,131.273 C155.164,131.719 155.540,132.611 155.540,132.611 L155.580,133.949 C155.580,133.949 155.525,134.967 155.525,134.967 C155.207,135.001 154.959,134.984 154.806,134.898 C154.043,134.475 152.975,134.969 152.819,135.321 C152.663,135.674 151.576,135.533 150.833,135.744 C150.517,135.834 150.142,135.976 149.882,136.184 C149.882,136.184 149.873,136.179 149.873,136.179 L149.510,135.733 L148.088,134.990 L147.030,134.692 L146.654,133.800 L146.609,132.314 C146.609,132.314 144.391,129.750 143.714,129.043 C143.037,128.337 142.440,127.408 142.440,127.408 C142.440,127.408 142.528,125.922 142.375,125.178 C142.221,124.435 143.117,123.655 143.201,123.543 C143.285,123.432 143.645,122.317 143.682,122.057 C143.718,121.796 143.305,121.165 143.305,121.165 C143.305,121.165 144.340,119.634 144.340,119.634 C144.349,119.648 144.357,119.662 144.360,119.674 C144.454,120.027 146.359,119.674 146.359,119.674 L149.869,120.097 L150.844,119.251 C150.844,119.251 150.844,119.247 150.844,119.239 zM155.561,134.962 C155.624,134.955 155.689,134.946 155.758,134.934 C155.689,134.946 155.625,134.955 155.561,134.962 zM155.818,134.923 C155.884,134.911 155.952,134.898 156.023,134.883 C155.952,134.898 155.884,134.911 155.818,134.923 zM156.097,134.866 C156.166,134.850 156.236,134.833 156.309,134.814 C156.236,134.833 156.166,134.850 156.097,134.866 zM156.398,134.790 C156.468,134.771 156.540,134.752 156.613,134.730 C156.540,134.752 156.468,134.771 156.398,134.790 zM156.718,134.699 C156.789,134.678 156.860,134.655 156.933,134.632 C156.860,134.655 156.789,134.677 156.718,134.699 zM157.055,134.592 C157.124,134.569 157.195,134.545 157.267,134.521 C157.195,134.545 157.125,134.569 157.055,134.592 zM157.407,134.472 C157.475,134.447 157.543,134.423 157.613,134.397 C157.543,134.423 157.475,134.447 157.407,134.472 zM157.771,134.338 C157.836,134.314 157.902,134.289 157.969,134.263 C157.902,134.289 157.836,134.314 157.771,134.338 zM158.145,134.194 C158.207,134.169 158.270,134.145 158.332,134.119 C158.270,134.145 158.207,134.169 158.145,134.194 zM158.529,134.039 C158.586,134.016 158.643,133.991 158.701,133.967 C158.643,133.991 158.586,134.016 158.529,134.039 zM158.918,133.875 C158.970,133.853 159.022,133.830 159.074,133.808 C159.022,133.830 158.970,133.853 158.918,133.875 zM159.347,133.688 C159.347,133.688 159.347,133.688 159.347,133.688 C159.335,133.693 159.323,133.699 159.311,133.704 C159.323,133.699 159.335,133.693 159.347,133.688 zM150.808,116.828 C150.808,116.828 150.808,116.828 150.808,116.828 C150.836,117.922 150.843,118.953 150.844,119.196 C150.842,118.950 150.836,117.919 150.808,116.828 z",
        },
        {
          name: "杨浦",
          color: "",
          areaInclude: true,
          textP: [158, 120],
          path:
            "M149.570,120.061 L149.869,120.097 L150.844,119.251 C150.844,119.251 150.833,116.080 150.706,114.600 C150.579,113.120 150.681,113.754 150.681,113.754 L154.591,110.794 C154.591,110.794 154.598,110.760 154.598,110.760 C155.075,110.950 155.446,111.020 156.103,111.217 C157.279,111.569 160.894,112.697 161.675,113.754 C162.456,114.811 164.286,114.741 164.249,116.291 C164.211,117.842 166.100,122.564 166.486,124.326 C166.871,126.088 166.623,128.978 166.136,129.401 C165.649,129.824 163.865,131.445 161.239,132.784 C159.143,133.853 156.781,134.831 155.525,134.968 C155.525,134.968 155.580,133.949 155.580,133.949 L155.540,132.611 C155.540,132.611 155.164,131.719 154.626,131.273 C154.088,130.827 154.420,130.233 154.420,130.233 C154.420,130.233 154.683,129.242 154.726,128.746 C154.770,128.251 153.991,127.557 153.991,127.557 C153.991,127.557 152.478,127.656 152.408,127.259 C152.338,126.863 151.618,126.169 151.660,125.624 C151.702,125.079 151.279,124.584 151.279,124.584 C151.279,124.584 149.959,123.345 149.302,122.800 C148.644,122.255 149.594,120.867 149.594,120.867 L149.570,120.061 z",
        },
      ],
      mapColor: [],
      points: [],
      cursorText: 0,
      timer: "",
      timer2: "",
      timer3: "",
      cursorShow: false,
      cursorPosition: 0,
      dragTarget: null,
      dragP: 0,
      offestP: 0,
      clampArray: [0, 1],
      greyBox: ["0%", "100%"],
      followShow: false,
      filterArray: this.mapData,
      diffDirection: true,
      perDistance: 0,
      tooltip:{
        name: '',
        x: 0,
        y: 0,
      },
      loopIdx: 0,
      toolTipAnimated: false,
    };
  },
  computed: {
    barWidth() {
      if(this.svgOptions.barShow){
        return this.svgOptions.gradWidth;
      }
      else if(this.svgOptions.barPosition=='side'){
        return -80;
      }else{
        return -60;
      }
    },
    mapBox() {
      let mapWidth = this.svgOptions.barPosition=='side'?(this.width - this.barWidth - 80):this.width;
      let mapHeight = this.svgOptions.barPosition=='side'?this.height:(this.height - this.barWidth - 60);
      let boxWidth, boxHeight, boxOffestX, boxOffestY;
      if(mapWidth/mapHeight > 368/268){
        boxWidth = mapHeight*368/268;
        boxHeight = mapHeight;
        boxOffestX = (mapWidth - boxWidth)/2;
        boxOffestY = 0;
      }else{
        boxHeight = mapWidth*268/368;
        boxWidth = mapWidth;
        boxOffestY = (mapHeight - boxHeight)/2;
        boxOffestX = 0;
      }
      return {
        x: boxWidth,
        y: boxHeight,
        offestX: boxOffestX,
        offestY: boxOffestY,
        width: mapWidth,
        height: mapHeight
      };
    },
    verticalViewBox() {
      return '0 0 ' + JSON.stringify(this.barWidth + 80) + ' ' + JSON.stringify(this.height - this.svgOptions.barPad*2);
    },
    horizonalViewBox() {
      return '0 0 ' + JSON.stringify(this.width - this.svgOptions.barPad*2) + ' ' + JSON.stringify(this.barWidth + 60);
    },
    svgOptions(){
      return Object.assign({
        colorGradient: ["#028090", "#f0f3bd"],
        range: [0, 150],
        highlight: "#06f092",
        gradWidth: 10,
        barPosition: "",
        zoomScale: 2.2,
        zoomOffest: [0, -77],
        barShow: true,
        barPad: 10,
        barRadius: 5,
        barBackground: "#ccc"
      }, this.options)
    },
    strip(){
      return this.svgOptions.barPosition=="side"?'.verticalStrip':'.gradStrip';
    },
    baseLength(){
      return this.svgOptions.barPosition=="side"? (this.height - this.svgOptions.barPad*2): (this.width  - this.svgOptions.barPad*2);
    },
    zoomStyle(){
      return 'transform: scale('+this.svgOptions.zoomScale+') translate('+this.svgOptions.zoomOffest[0]+'px, '+this.svgOptions.zoomOffest[1]+'px)';
    }
  },
  created() {
    for (let i = 0; i < this.mapPath.length; i++) {
      this.mapPath[i].color = this.gradColor(this.mapData[i].number);
      this.mapColor[i] = this.mapPath[i].color;
    }
    this.mapData.sort((a,b)=>{
      let c = a.zIndex?a.zIndex:0;
      let d = b.zIndex?b.zIndex:0;
      return c - d;
    });
  },
  mounted() {
    this.toolTipLoop(1000);
  },
  watch: {
    filterArray: function(a, b) {
      let diffArray = a.concat(b).filter(v => !a.includes(v) || !b.includes(v));
      if (diffArray.length > 0) {
        this.diffDirection = a.length < b.length ? true : false;
      };
      diffArray.forEach(item => {
        const idx = this.mapPath.findIndex(
          element => element.name === item.name
        );
        if(this.diffDirection){
          this.mapPath[idx].areaInclude = false;
          this.mapPath[idx].color = this.svgOptions.barBackground;
        } else {
          this.mapPath[idx].areaInclude = true;
          this.mapPath[idx].color = this.mapColor[idx];
        }
      })
    },
  },
  methods: {
    hexToRgb(hex) {
      hex = hex.substring(1);
      let rgb = [];
      if (hex.length > 3) {
        rgb = hex.match(/.{1,2}/g);
        let i = 0;
        rgb.forEach((element) => {
          rgb[i] = parseInt(element, 16);
          i++;
        });
      } else {
        rgb = hex.match(/.{1,1}/g);
        let i = 0;
        rgb.forEach((element) => {
          rgb[i] = parseInt(element + element, 16);
          i++;
        });
      }
      return rgb;
    },
    gradColor(number) {
      const range = this.svgOptions.range;
      const colorGradient = this.svgOptions.colorGradient;
      number = Math.max(number, range[0]);
      number = Math.min(number, range[1]);
      const rangeDiff = range[1] - range[0];
      const gradDiff = [];
      const per = (number - range[0]) / rangeDiff;
      let i = 0;
      for (let index = 0; index < 3; index++) {
        gradDiff[index] =
          this.hexToRgb(colorGradient[1])[index] -
          this.hexToRgb(colorGradient[0])[index];
      }
      gradDiff.forEach((element) => {
        gradDiff[i] = Math.floor(element * per) + this.hexToRgb(colorGradient[0])[i];
        i++;
      });
      // console.log(per,rangeDiff,gradDiff);
      return "rgb(" + gradDiff.toString() + ")";
    },
    pathMatch(map) {
      let p = "";
      this.mapPath.forEach((element) => {
        if (map == element.name) {
          p = element.path;
        }
      });
      return p;
    },
    textXMatch(map) {
      let x = 0;
      this.mapPath.forEach((element) => {
        if (map == element.name) {
          if (element.textP) {
            x = element.textP[0];
          }
        }
      });
      return x;
    },
    textYMatch(map) {
      let y = 0;
      this.mapPath.forEach((element) => {
        if (map == element.name) {
          if (element.textP) {
            y = element.textP[1];
          }
        }
      });
      return y;
    },
    cursorFollow(event){
      if(this.cursorShow){
        const svg = document.querySelector(".map_content");
        let pt = svg.createSVGPoint();
        pt.x = event.clientX;
        pt.y = event.clientY;
        pt = pt.matrixTransform(svg.getScreenCTM().inverse());
        this.tooltip.x = pt.x;
        this.tooltip.y = pt.y;
      }
    },
    cursorIn(num, idx, name) {
      clearTimeout(this.timer);
      this.cursorShow = true;
      this.cursorText = num;
      this.tooltip.name = name;
      this.cursorPosition =((num - this.svgOptions.range[0]) / (this.svgOptions.range[1] - this.svgOptions.range[0])) * 100;
      this.mapPath[idx].color = this.svgOptions.highlight;
    },
    cursorOut(idx, noFade) {
      if(this.mapPath[idx].areaInclude){
        this.mapPath[idx].color = this.mapColor[idx];
      } else {
        this.mapPath[idx].color = this.svgOptions.barBackground;
      }
      if(noFade){
        clearTimeout(this.timer);
      }else{
        // this.timer = setTimeout(() => {
        //   this.cursorShow = false;
        // }, 1000);
      }
    },
    numberShow(num) {
      return Math.floor(
        num * (this.svgOptions.range[1] - this.svgOptions.range[0]) +
          this.svgOptions.range[0]
      );
    },
    cursorDown(evt) {
      const svg = document.querySelector(this.strip);
      const targetCls = evt.target.classList;
      let mp = 0;
      let pt = svg.createSVGPoint();
      let startP = 0;
      let Regex;
      if (targetCls.contains("dragBtn")) {
        clearTimeout(this.timer2);
        this.followShow = true;
        this.dragTarget = evt.target;
        pt.x = evt.clientX;
        pt.y = evt.clientY;
        pt = pt.matrixTransform(svg.getScreenCTM().inverse());
        if(this.svgOptions.barPosition=='side'){
          mp = pt.y;
          Regex = /translateY\((-?\d+(?:\.\d*)?)%\)/;
        } else {
          mp = pt.x;
          Regex = /translateX\((-?\d+(?:\.\d*)?)%\)/;
        }
        startP = this.dragTarget.style.transform.match(Regex)[1] / 100;
        this.offestP = startP - mp / this.baseLength;
      } else {
        this.dragTarget = null;
      }
    },
    cursorUp() {
      this.dragTarget = null;
      this.timer2 = setTimeout(() => {
        this.followShow = false;
      }, 400);
    },
    cursorDrag(evt) {
      const svg = document.querySelector(this.strip);
      // const numFollow = document.querySelector(".cursorFollow");
      let mp = 0;
      if (this.dragTarget !== null) {
        let pt = svg.createSVGPoint();
        let distance = 0;
        let clampRange = JSON.parse(JSON.stringify(this.clampArray));
        let transText = "translateX(";
        // const transAdd = " scaleY(-1)";
        let rangeFilter = [
          this.clampArray[0] * (this.svgOptions.range[1] - this.svgOptions.range[0]) +
            this.svgOptions.range[0],
          this.clampArray[1] * (this.svgOptions.range[1] - this.svgOptions.range[0]) +
            this.svgOptions.range[0],
        ];
        pt.x = evt.clientX;
        pt.y = evt.clientY;
        pt = pt.matrixTransform(svg.getScreenCTM().inverse());
        if(this.svgOptions.barPosition=='side'){
          mp = pt.y;
          transText = "translateY(";
        } else {
          mp = pt.x;
          transText = "translateX(";
        }
        distance = mp / this.baseLength + this.offestP;
        if (this.dragTarget.classList.contains("btn_max")) {
          this.dragP = this.numberShow(this.clampArray[1]);
          let temp = distance - this.clampArray[0] < 0 ? this.clampArray[0] : distance;
          this.clampArray[1] = temp.clamp(0, 1);
          clampRange[1] = 1;
        } else {
          this.dragP = this.numberShow(this.clampArray[0]);
          let temp = distance - this.clampArray[1] > 0 ? this.clampArray[1] : distance;
          this.clampArray[0] = temp.clamp(0, 1);
          clampRange[0] = 0;
        }
        this.perDistance = distance.clamp(clampRange[0], clampRange[1]) * 100;
        this.dragTarget.style.transform = transText + this.perDistance + "%)";
        this.greyBox = [
          this.clampArray[0] * 100 + "%",
          (this.clampArray[1] - this.clampArray[0]) * 100 + "%",
        ];
        this.filterArray = this.mapData.filter(
          item => item.number >= rangeFilter[0] && item.number <= rangeFilter[1]
        );
      }
    },
    toolTip_base(idx){
      this.cursorIn(this.mapData[idx].number, idx, this.mapData[idx].name)
      if(this.mapData[idx].zoom){
        this.tooltip.x = (this.textXMatch(this.mapData[idx].name) + this.svgOptions.zoomOffest[0])*this.svgOptions.zoomScale;
        this.tooltip.y = (this.textYMatch(this.mapData[idx].name) + this.svgOptions.zoomOffest[1])*this.svgOptions.zoomScale;
      }else{
        this.tooltip.x = this.textXMatch(this.mapData[idx].name);
        this.tooltip.y = this.textYMatch(this.mapData[idx].name);
      }
    },
    toolTipLoop(interval){
      this.toolTipAnimated = true;
      this.timer3 = setInterval(() => {
        if(this.loopIdx<16){
          this.loopIdx++;
          if(this.loopIdx===16){
            // this.cursorIn(this.mapData[i].number, i, this.mapData[i].name)
            this.toolTip_base(0)
          }else{
            this.toolTip_base(this.loopIdx)
          }
        }else{
          this.loopIdx = 1;
          this.toolTip_base(this.loopIdx)
        }
        this.cursorOut(this.loopIdx - 1, true);
        
      }, interval)
    },
    toolTipLoopStop(){
      this.toolTipAnimated = false;
      this.cursorOut(this.loopIdx, true);
      clearInterval(this.timer3);
    },
  },
  beforeDestroy() {
    clearInterval(this.timer);
    clearInterval(this.timer2);
    clearInterval(this.timer3);
  },
};
</script>

<style lang="css">
  .map_container{
    position: relative;
  }
  .map_container>.tooltip{
    position: absolute;
    padding: 10px;
    background-color: rgba(0, 0, 0, 0.6);
    transform: translate(calc(0% + 10px), calc(-10px - 100%));
    color: #fff;
    border-radius: 4px;
    pointer-events: none;
    white-space: nowrap;
  }
  .map_container>.tooltip.animated{
    transition: all ease-out 500ms;
  }
  .map_container>svg{
    display: inline-block;
  }
  #zoom {
    transition: transform 1s ease-out;
  }
  svg.map_content text {
    cursor: pointer;
  }
  svg path:hover {
    transition-duration: 0ms;
  }
  svg path {
    transition: fill 500ms ease-out;
  }
  svg .mapName,
  svg .mapName_zoom {
    text-anchor: middle;
    font-size: 16px;
    stroke-width: 0.5px;
    fill: #fff;
    font-weight: 800;
    stroke: #000;
    text-shadow: 0 0 4px rgba(0, 0, 0, 0.4);
  }
  svg .mapName_zoom {
    font-size: 7px;
    stroke-width: 0.25px;
  }
  svg .zoom>g{
    position: relative;
  }
  .gradStrip {
    width: 100%;
  }
  .verticalStrip{
    transform: scaleY(-1);
    height: 100%;
  }
  .gradStrip text, .verticalStrip text {
    alignment-baseline: hanging;
    user-select: none;
  }
  .text-start {
    text-anchor: start;
  }
  .text-end {
    text-anchor: end;
  }
  .cursor {
    transition: all 400ms ease-out;
  }
  .cursor text,
  text.cursorFollow {
    text-anchor: middle;
  }
  .verticalStrip>text.cursorFollow {
    text-anchor: initial;
  }
  .gradStrip .dragBtn {
    cursor: ew-resize;
  }
  .verticalStrip .dragBtn {
    cursor: ns-resize;
  }
  .verticalStrip .text-start{
    transform: scaleY(-1) translateY(-12px);
    text-anchor: end;
  }
  .verticalStrip .text-end{
    transform: translateY(calc(200% - 2px)) scaleY(-1);
  }
  .verticalStrip .cursor text{
    text-anchor: start;
    transform: scaleY(-1) translateX(56px);
  }
</style>
